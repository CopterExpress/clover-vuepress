<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Code examples | Clover</title><meta name="description" content="Clover Drone Kit">
    <link rel="modulepreload" href="/clover-vuepress/assets/app.4f6a4bec.js"><link rel="modulepreload" href="/clover-vuepress/assets/snippets.html.91d6e75c.js"><link rel="modulepreload" href="/clover-vuepress/assets/snippets.html.9d558821.js">
    <link rel="stylesheet" href="/clover-vuepress/assets/style.7a1025bf.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="true" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/clover-vuepress/en/" class=""><img class="logo" src="/clover-vuepress/clover-logo.png" alt="Clover"><span class="site-name can-hide">Clover</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://coex.tech" rel="noopener noreferrer" target="_blank" aria-label="Official Site"><!--[--><!--]--> Official Site <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://t.me/COEXHelpdesk" rel="noopener noreferrer" target="_blank" aria-label="Support Chat"><!--[--><!--]--> Support Chat <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/clover-vuepress/en/snippets.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/clover-vuepress/ru/snippets.html" class="" aria-label="Русский"><!--[--><!--]--> Русский <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/CopterExpress/clover" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://coex.tech" rel="noopener noreferrer" target="_blank" aria-label="Official Site"><!--[--><!--]--> Official Site <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://t.me/COEXHelpdesk" rel="noopener noreferrer" target="_blank" aria-label="Support Chat"><!--[--><!--]--> Support Chat <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/clover-vuepress/en/snippets.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/clover-vuepress/ru/snippets.html" class="" aria-label="Русский"><!--[--><!--]--> Русский <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/CopterExpress/clover" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/clover-vuepress/en/" class="sidebar-item sidebar-heading" aria-label="COEX Clover"><!--[--><!--]--> COEX Clover <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/glossary.html" class="sidebar-item sidebar-heading" aria-label="Glossary"><!--[--><!--]--> Glossary <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/safety.html" class="sidebar-item sidebar-heading" aria-label="Safety tips"><!--[--><!--]--> Safety tips <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Assembly <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/assembly.html" class="sidebar-item" aria-label="Clover drone assembly"><!--[--><!--]--> Clover drone assembly <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/assemble_4_2.html" class="sidebar-item" aria-label="Clover 4.2 assembly"><!--[--><!--]--> Clover 4.2 assembly <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/assemble_4_2_ws.html" class="sidebar-item" aria-label="Clover 4 assembly"><!--[--><!--]--> Clover 4 assembly <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/assemble_4.html" class="sidebar-item" aria-label="Clover 4 assembly"><!--[--><!--]--> Clover 4 assembly <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/assemble_3.html" class="sidebar-item" aria-label="Assembly of Clover 3"><!--[--><!--]--> Assembly of Clover 3 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/assemble_2.html" class="sidebar-item" aria-label="Clover 2 construction kit assembly instruction"><!--[--><!--]--> Clover 2 construction kit assembly instruction <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Configuration <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/setup.html" class="sidebar-item" aria-label="Initial setup"><!--[--><!--]--> Initial setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/calibration.html" class="sidebar-item" aria-label="Sensor calibration"><!--[--><!--]--> Sensor calibration <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/radio.html" class="sidebar-item" aria-label="RC setup"><!--[--><!--]--> RC setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/rc_flysky_a8s.html" class="sidebar-item" aria-label="Using Flysky FS-A8S"><!--[--><!--]--> Using Flysky FS-A8S <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/modes.html" class="sidebar-item" aria-label="Flight modes"><!--[--><!--]--> Flight modes <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/power.html" class="sidebar-item" aria-label="Power setup"><!--[--><!--]--> Power setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/failsafe.html" class="sidebar-item" aria-label="Failsafe configuration"><!--[--><!--]--> Failsafe configuration <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Manual flight <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/flight.html" class="sidebar-item" aria-label="Flight"><!--[--><!--]--> Flight <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/flight_exercises.html" class="sidebar-item" aria-label="Drone control exercises"><!--[--><!--]--> Drone control exercises <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Working with Raspberry Pi <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/raspberry.html" class="sidebar-item" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/image.html" class="sidebar-item" aria-label="Raspberry Pi image"><!--[--><!--]--> Raspberry Pi image <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/wifi.html" class="sidebar-item" aria-label="Connecting to Clover via Wi-Fi"><!--[--><!--]--> Connecting to Clover via Wi-Fi <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/connection.html" class="sidebar-item" aria-label="Connecting Raspberry Pi to the flight controller"><!--[--><!--]--> Connecting Raspberry Pi to the flight controller <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/gcs_bridge.html" class="sidebar-item" aria-label="Using QGroundControl via Wi-Fi"><!--[--><!--]--> Using QGroundControl via Wi-Fi <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/ssh.html" class="sidebar-item" aria-label="SSH access to Raspberry Pi"><!--[--><!--]--> SSH access to Raspberry Pi <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/cli.html" class="sidebar-item" aria-label="Command line interface"><!--[--><!--]--> Command line interface <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/selfcheck.html" class="sidebar-item" aria-label="Automatic check"><!--[--><!--]--> Automatic check <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/web_video_server.html" class="sidebar-item" aria-label="Viewing images from cameras"><!--[--><!--]--> Viewing images from cameras <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Programming <span class="down arrow"></span></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/programming.html" class="sidebar-item" aria-label="Programming"><!--[--><!--]--> Programming <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/camera_setup.html" class="sidebar-item" aria-label="Camera setup"><!--[--><!--]--> Camera setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/aruco.html" class="sidebar-item" aria-label="ArUco markers"><!--[--><!--]--> ArUco markers <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/aruco_marker.html" class="sidebar-item" aria-label="ArUco marker detection"><!--[--><!--]--> ArUco marker detection <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/aruco_map.html" class="sidebar-item" aria-label="Map-based navigation with ArUco markers"><!--[--><!--]--> Map-based navigation with ArUco markers <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/optical_flow.html" class="sidebar-item" aria-label="Use of Optical Flow"><!--[--><!--]--> Use of Optical Flow <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/simple_offboard.html" class="sidebar-item" aria-label="Autonomous flight"><!--[--><!--]--> Autonomous flight <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/frames.html" class="sidebar-item" aria-label="Coordinate systems (frames)"><!--[--><!--]--> Coordinate systems (frames) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/clover-vuepress/en/snippets.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Code examples"><!--[--><!--]--> Code examples <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/laser.html" class="sidebar-item" aria-label="Working with a laser rangefinder"><!--[--><!--]--> Working with a laser rangefinder <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/leds.html" class="sidebar-item" aria-label="Working with a LED strip"><!--[--><!--]--> Working with a LED strip <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/gpio.html" class="sidebar-item" aria-label="Working with GPIO"><!--[--><!--]--> Working with GPIO <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/sonar.html" class="sidebar-item" aria-label="Working with the ultrasonic distance gage"><!--[--><!--]--> Working with the ultrasonic distance gage <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/camera.html" class="sidebar-item" aria-label="Working with the camera"><!--[--><!--]--> Working with the camera <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/rviz.html" class="sidebar-item" aria-label="Using rviz and rqt"><!--[--><!--]--> Using rviz and rqt <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/autolaunch.html" class="sidebar-item" aria-label="Software autorun"><!--[--><!--]--> Software autorun <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/javascript.html" class="sidebar-item" aria-label="Work with ROS from browser"><!--[--><!--]--> Work with ROS from browser <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/blocks.html" class="sidebar-item" aria-label="Blocks programming for Clover"><!--[--><!--]--> Blocks programming for Clover <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/simulation.html" class="sidebar-item" aria-label="Simulation overview"><!--[--><!--]--> Simulation overview <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/simulation_native.html" class="sidebar-item" aria-label="Native setup"><!--[--><!--]--> Native setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/simulation_vm.html" class="sidebar-item" aria-label="Simulation VM setup"><!--[--><!--]--> Simulation VM setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/simulation_usage.html" class="sidebar-item" aria-label="Using the simulator"><!--[--><!--]--> Using the simulator <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/simulation_m1.html" class="sidebar-item" aria-label="Running simulator on M1 powered computer"><!--[--><!--]--> Running simulator on M1 powered computer <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/ros.html" class="sidebar-item" aria-label="ROS"><!--[--><!--]--> ROS <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/mavros.html" class="sidebar-item" aria-label="MAVROS"><!--[--><!--]--> MAVROS <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Supplementary materials <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/supplementary.html" class="sidebar-item" aria-label="Supplementary materials"><!--[--><!--]--> Supplementary materials <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/coex_pix.html" class="sidebar-item" aria-label="COEX Pix"><!--[--><!--]--> COEX Pix <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/coex_pdb.html" class="sidebar-item" aria-label="COEX PDB"><!--[--><!--]--> COEX PDB <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/coex_gps.html" class="sidebar-item" aria-label="COEX GPS"><!--[--><!--]--> COEX GPS <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/auto_setup.html" class="sidebar-item" aria-label="Step-by-step guide on autonomous flight with Clover 4"><!--[--><!--]--> Step-by-step guide on autonomous flight with Clover 4 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/hostname.html" class="sidebar-item" aria-label="Hostname"><!--[--><!--]--> Hostname <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/sitl.html" class="sidebar-item" aria-label="PX4 Simulation"><!--[--><!--]--> PX4 Simulation <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/wall_aruco.html" class="sidebar-item" aria-label="Navigation using vertical ArUco-markers"><!--[--><!--]--> Navigation using vertical ArUco-markers <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/calibratePID.html" class="sidebar-item" aria-label="Configuring the PID coefficients"><!--[--><!--]--> Configuring the PID coefficients <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/models.html" class="sidebar-item" aria-label="Model files for parts"><!--[--><!--]--> Model files for parts <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/ros-install.html" class="sidebar-item" aria-label="ROS Melodic package installation and setup"><!--[--><!--]--> ROS Melodic package installation and setup <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/camera_calibration.html" class="sidebar-item" aria-label="Camera calibration"><!--[--><!--]--> Camera calibration <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/zerotire_vpn.html" class="sidebar-item" aria-label="Creating a virtual network ZeroTier One and connecting to it"><!--[--><!--]--> Creating a virtual network ZeroTier One and connecting to it <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/4g.html" class="sidebar-item" aria-label="Multi-copter control with 4G communication"><!--[--><!--]--> Multi-copter control with 4G communication <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/jetson_nano.html" class="sidebar-item" aria-label="Clover and Jetson Nano"><!--[--><!--]--> Clover and Jetson Nano <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/rc.html" class="sidebar-item" aria-label="Controlling Clover from a smartphone"><!--[--><!--]--> Controlling Clover from a smartphone <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/network.html" class="sidebar-item" aria-label="Configuring Wi-Fi"><!--[--><!--]--> Configuring Wi-Fi <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/uart.html" class="sidebar-item" aria-label="UART interface"><!--[--><!--]--> UART interface <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/parameters.html" class="sidebar-item" aria-label="PX4 Parameters"><!--[--><!--]--> PX4 Parameters <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/flight_logs.html" class="sidebar-item" aria-label="PX4 Logs and Topics"><!--[--><!--]--> PX4 Logs and Topics <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/firmware.html" class="sidebar-item" aria-label="Pixhawk / Pixracer firmware flashing"><!--[--><!--]--> Pixhawk / Pixracer firmware flashing <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/mavlink.html" class="sidebar-item" aria-label="MAVLink"><!--[--><!--]--> MAVLink <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/test_connection.html" class="sidebar-item" aria-label="How to use a multimeter?"><!--[--><!--]--> How to use a multimeter? <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/radioerrors.html" class="sidebar-item" aria-label="Possible radio failures"><!--[--><!--]--> Possible radio failures <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/esc_firmware.html" class="sidebar-item" aria-label="Flashing ESCs using BLHeliSuite"><!--[--><!--]--> Flashing ESCs using BLHeliSuite <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/arduino.html" class="sidebar-item" aria-label="Controlling the copter from Arduino"><!--[--><!--]--> Controlling the copter from Arduino <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/gps.html" class="sidebar-item" aria-label="Connecting GPS"><!--[--><!--]--> Connecting GPS <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/ir_sensors.html" class="sidebar-item" aria-label="Working with IR sensors on Raspberry Pi 3"><!--[--><!--]--> Working with IR sensors on Raspberry Pi 3 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/fpv_clover_4_2.html" class="sidebar-item" aria-label="Installing and configuring FPV equipment"><!--[--><!--]--> Installing and configuring FPV equipment <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/fpv.html" class="sidebar-item" aria-label="Installation of FPV"><!--[--><!--]--> Installation of FPV <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/magnetic_grip.html" class="sidebar-item" aria-label="Assembling and setting up the electromagnetic gripper"><!--[--><!--]--> Assembling and setting up the electromagnetic gripper <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/mechanical_grip.html" class="sidebar-item" aria-label="Assembling and setting up a mechanical gripper"><!--[--><!--]--> Assembling and setting up a mechanical gripper <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/trainer_mode.html" class="sidebar-item" aria-label="FlySky Trainer mode settings"><!--[--><!--]--> FlySky Trainer mode settings <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/tinning.html" class="sidebar-item" aria-label="Blanching"><!--[--><!--]--> Blanching <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/connectortypes.html" class="sidebar-item" aria-label="Types of power connectors"><!--[--><!--]--> Types of power connectors <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/4in1.html" class="sidebar-item" aria-label="Connecting 4 in 1 ESCs"><!--[--><!--]--> Connecting 4 in 1 ESCs <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/tb.html" class="sidebar-item" aria-label="Soldering safety"><!--[--><!--]--> Soldering safety <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/leds_old.html" class="sidebar-item" aria-label="Working with a LED strip on Raspberry 3"><!--[--><!--]--> Working with a LED strip on Raspberry 3 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/contributing.html" class="sidebar-item" aria-label="Contribution to Clover"><!--[--><!--]--> Contribution to Clover <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/packages.html" class="sidebar-item" aria-label="COEX packages repository"><!--[--><!--]--> COEX packages repository <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/migrate20.html" class="sidebar-item" aria-label="Migration to version 0.20"><!--[--><!--]--> Migration to version 0.20 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/migrate22.html" class="sidebar-item" aria-label="Migration to version 0.22"><!--[--><!--]--> Migration to version 0.22 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Events <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/clover-vuepress/en/events.html" class="sidebar-item" aria-label="Events"><!--[--><!--]--> Events <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/copterhack2022.html" class="sidebar-item" aria-label="CopterHack 2022"><!--[--><!--]--> CopterHack 2022 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/copterhack2021.html" class="sidebar-item" aria-label="CopterHack 2021"><!--[--><!--]--> CopterHack 2021 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/copterhack2019.html" class="sidebar-item" aria-label="Copter Hack 2019"><!--[--><!--]--> Copter Hack 2019 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/copterhack2018.html" class="sidebar-item" aria-label="Copter Hack 2018"><!--[--><!--]--> Copter Hack 2018 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/copterhack2017.html" class="sidebar-item" aria-label="Copter Hack 2017"><!--[--><!--]--> Copter Hack 2017 <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/video_contest.html" class="sidebar-item" aria-label="Contest for the best educational video on assembly and configuration"><!--[--><!--]--> Contest for the best educational video on assembly and configuration <!--[--><!--]--></a><!----></li><li><a href="/clover-vuepress/en/educational_contests.html" class="sidebar-item" aria-label="Educational contests"><!--[--><!--]--> Educational contests <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="code-examples" tabindex="-1"><a class="header-anchor" href="#code-examples" aria-hidden="true">#</a> Code examples</h1><h2 id="python" tabindex="-1"><a class="header-anchor" href="#python" aria-hidden="true">#</a> Python</h2><h3 id="navigate_wait" tabindex="-1"><a class="header-anchor" href="#navigate_wait" aria-hidden="true">#</a> #</h3><p><a name="block-nav"></a></p><p><a name="block-takeoff"></a></p><p>Function to fly to a point and wait for copter&#39;s arrival:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> math

<span class="token keyword">def</span> <span class="token function">navigate_wait</span><span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> z<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> yaw<span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">&#39;nan&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> speed<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> frame_id<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> auto_arm<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> tolerance<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    navigate<span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">,</span> z<span class="token operator">=</span>z<span class="token punctuation">,</span> yaw<span class="token operator">=</span>yaw<span class="token punctuation">,</span> speed<span class="token operator">=</span>speed<span class="token punctuation">,</span> frame_id<span class="token operator">=</span>frame_id<span class="token punctuation">,</span> auto_arm<span class="token operator">=</span>auto_arm<span class="token punctuation">)</span>

    <span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        telem <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span>frame_id<span class="token operator">=</span><span class="token string">&#39;navigate_target&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>telem<span class="token punctuation">.</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> telem<span class="token punctuation">.</span>y <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> telem<span class="token punctuation">.</span>z <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> tolerance<span class="token punctuation">:</span>
            <span class="token keyword">break</span>
        rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
</code></pre></div><p>This function utilizes <a href="/clover-vuepress/en/frames.html#navigate_target" class=""><code>navigate_target</code></a> frame for computing the distance to the target.</p><p>Using the function for flying to the point x=3, y=2, z=1 in <a href="/clover-vuepress/en/aruco_map.html" class="">marker&#39;s map</a>:</p><div class="language-python ext-py"><pre class="language-python"><code>navigate_wait<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> z<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> frame_id<span class="token operator">=</span><span class="token string">&#39;aruco_map&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>This function can be used for taking off as well:</p><div class="language-python ext-py"><pre class="language-python"><code>navigate_wait<span class="token punctuation">(</span>z<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> frame_id<span class="token operator">=</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span> auto_arm<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="block-land" tabindex="-1"><a class="header-anchor" href="#block-land" aria-hidden="true">#</a> #</h3><p><a name="block-land"></a></p><p>Land and wait until the copter lands:</p><div class="language-python ext-py"><pre class="language-python"><code>land<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>armed<span class="token punctuation">:</span>
    rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
</code></pre></div><p>Usage:</p><div class="language-python ext-py"><pre class="language-python"><code>land_wait<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="wait_arrival" tabindex="-1"><a class="header-anchor" href="#wait_arrival" aria-hidden="true">#</a> #</h3><p>Wait for copter&#39;s arrival to the <a href="/clover-vuepress/en/simple_offboard.html#navigate" class="">navigate</a> target:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> math

<span class="token keyword">def</span> <span class="token function">wait_arrival</span><span class="token punctuation">(</span>tolerance<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        telem <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span>frame_id<span class="token operator">=</span><span class="token string">&#39;navigate_target&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>telem<span class="token punctuation">.</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> telem<span class="token punctuation">.</span>y <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> telem<span class="token punctuation">.</span>z <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> tolerance<span class="token punctuation">:</span>
            <span class="token keyword">break</span>
        rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="get_distance" tabindex="-1"><a class="header-anchor" href="#get_distance" aria-hidden="true">#</a> #</h3><p>Calculate the distance between two points (<strong>important</strong>: the points are to be in the same <a href="/clover-vuepress/en/frames.html" class="">coordinate system</a>):</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> math

<span class="token keyword">def</span> <span class="token function">get_distance</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> z1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> z2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">(</span>x1 <span class="token operator">-</span> x2<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y1 <span class="token operator">-</span> y2<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>z1 <span class="token operator">-</span> z2<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="get_distance_global" tabindex="-1"><a class="header-anchor" href="#get_distance_global" aria-hidden="true">#</a> #</h3><p>Approximation of distance (in meters) between two global coordinates (latitude/longitude):</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> math

<span class="token keyword">def</span> <span class="token function">get_distance_global</span><span class="token punctuation">(</span>lat1<span class="token punctuation">,</span> lon1<span class="token punctuation">,</span> lat2<span class="token punctuation">,</span> lon2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> math<span class="token punctuation">.</span>hypot<span class="token punctuation">(</span>lat1 <span class="token operator">-</span> lat2<span class="token punctuation">,</span> lon1 <span class="token operator">-</span> lon2<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.113195e5</span>
</code></pre></div><h3 id="disarm" tabindex="-1"><a class="header-anchor" href="#disarm" aria-hidden="true">#</a> #</h3><p>Disarm the drone (propellers will stop, <strong>the drone will fall down</strong>):</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token comment"># Declaring a proxy:</span>
<span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> CommandBool
arming <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">&#39;mavros/cmd/arming&#39;</span><span class="token punctuation">,</span> CommandBool<span class="token punctuation">)</span>

<span class="token comment"># ...</span>

arming<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># disarm</span>
</code></pre></div><h3 id="transform" tabindex="-1"><a class="header-anchor" href="#transform" aria-hidden="true">#</a> #</h3><p>Transform the position (<code>PoseStamped</code>) from one <a href="/clover-vuepress/en/frames.html" class="">coordinate system</a> to another using <a href="http://wiki.ros.org/tf2" target="_blank" rel="noopener noreferrer">tf2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> tf2_ros
<span class="token keyword">import</span> tf2_geometry_msgs
<span class="token keyword">from</span> geometry_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> PoseStamped

tf_buffer <span class="token operator">=</span> tf2_ros<span class="token punctuation">.</span>Buffer<span class="token punctuation">(</span><span class="token punctuation">)</span>
tf_listener <span class="token operator">=</span> tf2_ros<span class="token punctuation">.</span>TransformListener<span class="token punctuation">(</span>tf_buffer<span class="token punctuation">)</span>

<span class="token comment"># ...</span>

<span class="token comment"># Create PoseStamped object (or get it from a topic):</span>
pose <span class="token operator">=</span> PoseStamped<span class="token punctuation">(</span><span class="token punctuation">)</span>
pose<span class="token punctuation">.</span>header<span class="token punctuation">.</span>frame_id <span class="token operator">=</span> <span class="token string">&#39;map&#39;</span> <span class="token comment"># coordinate frame, in which the position is specified</span>
pose<span class="token punctuation">.</span>header<span class="token punctuation">.</span>stamp <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_rostime<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># the time for which the position is specified (current time)</span>
pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span>
pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span>
pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">3</span>
pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token number">1</span>

frame_id <span class="token operator">=</span> <span class="token string">&#39;base_link&#39;</span> <span class="token comment"># target coordinate frame</span>
transform_timeout <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Duration<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token comment"># timeout for transformation</span>

<span class="token comment"># Transform the position from the old frame to the new one:</span>
new_pose <span class="token operator">=</span> tf_buffer<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>pose<span class="token punctuation">,</span> frame_id<span class="token punctuation">,</span> transform_timeout<span class="token punctuation">)</span>
</code></pre></div><h3 id="upside-down" tabindex="-1"><a class="header-anchor" href="#upside-down" aria-hidden="true">#</a> #</h3><p>Determine whether the copter is turned upside-down:</p><div class="language-python ext-py"><pre class="language-python"><code>PI_2 <span class="token operator">=</span> math<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">2</span>
telem <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span>

flipped <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>telem<span class="token punctuation">.</span>pitch<span class="token punctuation">)</span> <span class="token operator">&gt;</span> PI_2 <span class="token keyword">or</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>telem<span class="token punctuation">.</span>roll<span class="token punctuation">)</span> <span class="token operator">&gt;</span> PI_2
</code></pre></div><h3 id="angle-hor" tabindex="-1"><a class="header-anchor" href="#angle-hor" aria-hidden="true">#</a> #</h3><p>Calculate the copter horizontal angle:</p><div class="language-python ext-py"><pre class="language-python"><code>PI_2 <span class="token operator">=</span> math<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">2</span>
telem <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span>

flipped <span class="token operator">=</span> <span class="token keyword">not</span> <span class="token operator">-</span>PI_2 <span class="token operator">&lt;=</span> telem<span class="token punctuation">.</span>pitch <span class="token operator">&lt;=</span> PI_2 <span class="token keyword">or</span> <span class="token keyword">not</span> <span class="token operator">-</span>PI_2 <span class="token operator">&lt;=</span> telem<span class="token punctuation">.</span>roll <span class="token operator">&lt;=</span> PI_2
angle_to_horizon <span class="token operator">=</span> math<span class="token punctuation">.</span>atan<span class="token punctuation">(</span>math<span class="token punctuation">.</span>hypot<span class="token punctuation">(</span>math<span class="token punctuation">.</span>tan<span class="token punctuation">(</span>telem<span class="token punctuation">.</span>pitch<span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>tan<span class="token punctuation">(</span>telem<span class="token punctuation">.</span>roll<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> flipped<span class="token punctuation">:</span>
    angle_to_horizon <span class="token operator">=</span> math<span class="token punctuation">.</span>pi <span class="token operator">-</span> angle_to_horizon
</code></pre></div><h3 id="circle" tabindex="-1"><a class="header-anchor" href="#circle" aria-hidden="true">#</a> #</h3><p>Fly along a circular path:</p><div class="language-python ext-py"><pre class="language-python"><code>RADIUS <span class="token operator">=</span> <span class="token number">0.6</span>  <span class="token comment"># m</span>
SPEED <span class="token operator">=</span> <span class="token number">0.3</span> <span class="token comment"># rad / s</span>

start <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span>
start_stamp <span class="token operator">=</span> rospy<span class="token punctuation">.</span>get_rostime<span class="token punctuation">(</span><span class="token punctuation">)</span>

r <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Rate<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    angle <span class="token operator">=</span> <span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>get_rostime<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_stamp<span class="token punctuation">)</span><span class="token punctuation">.</span>to_sec<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> SPEED
    x <span class="token operator">=</span> start<span class="token punctuation">.</span>x <span class="token operator">+</span> math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> RADIUS
    y <span class="token operator">=</span> start<span class="token punctuation">.</span>y <span class="token operator">+</span> math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> RADIUS
    set_position<span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">,</span> z<span class="token operator">=</span>start<span class="token punctuation">.</span>z<span class="token punctuation">)</span>

    r<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="rate" tabindex="-1"><a class="header-anchor" href="#rate" aria-hidden="true">#</a> #</h3><p>Repeat an action at a frequency of 10 Hz:</p><div class="language-python ext-py"><pre class="language-python"><code>r <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Rate<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># Do anything</span>
    r<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="mavros-sub" tabindex="-1"><a class="header-anchor" href="#mavros-sub" aria-hidden="true">#</a> #</h3><p>An example of subscription to a topic from MAVROS:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> geometry_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> PoseStamped<span class="token punctuation">,</span> TwistStamped
<span class="token keyword">from</span> sensor_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> BatteryState
<span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> RCIn

<span class="token keyword">def</span> <span class="token function">pose_update</span><span class="token punctuation">(</span>pose<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># Processing new data of copter&#39;s position</span>
    <span class="token keyword">pass</span>

rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">&#39;/mavros/local_position/pose&#39;</span><span class="token punctuation">,</span> PoseStamped<span class="token punctuation">,</span> pose_update<span class="token punctuation">)</span>
rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">&#39;/mavros/local_position/velocity&#39;</span><span class="token punctuation">,</span> TwistStamped<span class="token punctuation">,</span> velocity_update<span class="token punctuation">)</span>
rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">&#39;/mavros/battery&#39;</span><span class="token punctuation">,</span> BatteryState<span class="token punctuation">,</span> battery_update<span class="token punctuation">)</span>
rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">&#39;mavros/rc/in&#39;</span><span class="token punctuation">,</span> RCIn<span class="token punctuation">,</span> rc_callback<span class="token punctuation">)</span>

rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Information about MAVROS topics is available at <a href="/clover-vuepress/en/mavros.html" class="">the link</a>.</p><h3 id="mavlink" tabindex="-1"><a class="header-anchor" href="#mavlink" aria-hidden="true">#</a> #</h3><p>Send an arbitrary <a href="/clover-vuepress/en/mavlink.html" class="">MAVLink message</a> to the copter:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Mavlink
<span class="token keyword">from</span> mavros <span class="token keyword">import</span> mavlink
<span class="token keyword">from</span> pymavlink <span class="token keyword">import</span> mavutil

mavlink_pub <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Publisher<span class="token punctuation">(</span><span class="token string">&#39;mavlink/to&#39;</span><span class="token punctuation">,</span> Mavlink<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># Sending a HEARTBEAT message:</span>
msg <span class="token operator">=</span> mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAVLink_heartbeat_message<span class="token punctuation">(</span>mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAV_TYPE_GCS<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
msg<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAVLink<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ros_msg <span class="token operator">=</span> mavlink<span class="token punctuation">.</span>convert_to_rosmsg<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>

mavlink_pub<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>ros_msg<span class="token punctuation">)</span>
</code></pre></div><h3 id="rc-sub" tabindex="-1"><a class="header-anchor" href="#rc-sub" aria-hidden="true">#</a> #</h3><p>React to the drone&#39;s mode switching (may be used for starting an autonomous flight, see <a href="https://gist.github.com/okalachev/b709f04522d2f9af97e835baedeb806b" target="_blank" rel="noopener noreferrer">example<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>):</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> RCIn

<span class="token comment"># Called when new data is received from the transmitter</span>
<span class="token keyword">def</span> <span class="token function">rc_callback</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># React on toggling the mode of the transmitter</span>
    <span class="token keyword">if</span> data<span class="token punctuation">.</span>channels<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">1100</span><span class="token punctuation">:</span>
        <span class="token comment"># ...</span>
        <span class="token keyword">pass</span>
    <span class="token keyword">elif</span> data<span class="token punctuation">.</span>channels<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">1900</span><span class="token punctuation">:</span>
        <span class="token comment"># ...</span>
        <span class="token keyword">pass</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token comment"># ...</span>
        <span class="token keyword">pass</span>

<span class="token comment"># Creating a subscriber for the topic with the data from the transmitter</span>
rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span><span class="token string">&#39;mavros/rc/in&#39;</span><span class="token punctuation">,</span> RCIn<span class="token punctuation">,</span> rc_callback<span class="token punctuation">)</span>

rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="set_mode" tabindex="-1"><a class="header-anchor" href="#set_mode" aria-hidden="true">#</a> #</h3><p>Change the <a href="/clover-vuepress/en/modes.html" class="">flight mode</a> to arbitrary one:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> SetMode

set_mode <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">&#39;mavros/set_mode&#39;</span><span class="token punctuation">,</span> SetMode<span class="token punctuation">)</span>

<span class="token comment"># ...</span>

set_mode<span class="token punctuation">(</span>custom_mode<span class="token operator">=</span><span class="token string">&#39;STABILIZED&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="flip" tabindex="-1"><a class="header-anchor" href="#flip" aria-hidden="true">#</a> #</h3><p>Flip:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> math

PI_2 <span class="token operator">=</span> math<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">2</span>

<span class="token keyword">def</span> <span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    start <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># memorize starting position</span>

    set_rates<span class="token punctuation">(</span>thrust<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># bump up</span>
    rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>

    set_rates<span class="token punctuation">(</span>pitch_rate<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> thrust<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>  <span class="token comment"># pitch flip</span>
    <span class="token comment"># set_rates(roll_rate=30, thrust=0.2)  # roll flip</span>

    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        telem <span class="token operator">=</span> get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span>
        flipped <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>telem<span class="token punctuation">.</span>pitch<span class="token punctuation">)</span> <span class="token operator">&gt;</span> PI_2 <span class="token keyword">or</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>telem<span class="token punctuation">.</span>roll<span class="token punctuation">)</span> <span class="token operator">&gt;</span> PI_2
        <span class="token keyword">if</span> flipped<span class="token punctuation">:</span>
            <span class="token keyword">break</span>

    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">&#39;finish flip&#39;</span><span class="token punctuation">)</span>
    set_position<span class="token punctuation">(</span>x<span class="token operator">=</span>start<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>start<span class="token punctuation">.</span>y<span class="token punctuation">,</span> z<span class="token operator">=</span>start<span class="token punctuation">.</span>z<span class="token punctuation">,</span> yaw<span class="token operator">=</span>start<span class="token punctuation">.</span>yaw<span class="token punctuation">)</span>  <span class="token comment"># finish flip</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>navigate<span class="token punctuation">(</span>z<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> speed<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> frame_id<span class="token operator">=</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span> auto_arm<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># take off</span>
rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">&#39;flip&#39;</span><span class="token punctuation">)</span>
flip<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Requires the <a href="/clover-vuepress/en/firmware.html#modified-firmware-for-clover" class="">special PX4 firmware for Clover</a>. Before running a flip, take all necessary safety precautions.</p><h3 id="calibrate-gyro" tabindex="-1"><a class="header-anchor" href="#calibrate-gyro" aria-hidden="true">#</a> #</h3><p>Perform gyro calibration:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> pymavlink <span class="token keyword">import</span> mavutil
<span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> CommandLong
<span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> State

send_command <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">&#39;/mavros/cmd/command&#39;</span><span class="token punctuation">,</span> CommandLong<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">calibrate_gyro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">&#39;Calibrate gyro&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> send_command<span class="token punctuation">(</span>command<span class="token operator">=</span>mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAV_CMD_PREFLIGHT_CALIBRATION<span class="token punctuation">,</span> param1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>success<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    calibrating <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        state <span class="token operator">=</span> rospy<span class="token punctuation">.</span>wait_for_message<span class="token punctuation">(</span><span class="token string">&#39;mavros/state&#39;</span><span class="token punctuation">,</span> State<span class="token punctuation">)</span>
        <span class="token keyword">if</span> state<span class="token punctuation">.</span>system_status <span class="token operator">==</span> mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAV_STATE_CALIBRATING <span class="token keyword">or</span> state<span class="token punctuation">.</span>system_status <span class="token operator">==</span> mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAV_STATE_UNINIT<span class="token punctuation">:</span>
            calibrating <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">elif</span> calibrating <span class="token keyword">and</span> state<span class="token punctuation">.</span>system_status <span class="token operator">==</span> mavutil<span class="token punctuation">.</span>mavlink<span class="token punctuation">.</span>MAV_STATE_STANDBY<span class="token punctuation">:</span>
            rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">&#39;Calibrating finished&#39;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>

calibrate_gyro<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>In process of calibration the drone should not be moved.</p></div><h3 id="aruco-detect-enabled" tabindex="-1"><a class="header-anchor" href="#aruco-detect-enabled" aria-hidden="true">#</a> #</h3><p>Enable and disable <a href="/clover-vuepress/en/aruco_marker.html" class="">ArUco markers recognition</a> dynamically (for example, for saving CPU resources):</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> rospy
<span class="token keyword">import</span> dynamic_reconfigure<span class="token punctuation">.</span>client

client <span class="token operator">=</span> dynamic_reconfigure<span class="token punctuation">.</span>client<span class="token punctuation">.</span>Client<span class="token punctuation">(</span><span class="token string">&#39;aruco_detect&#39;</span><span class="token punctuation">)</span>

<span class="token comment"># Turn markers recognition off</span>
client<span class="token punctuation">.</span>update_configuration<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;enabled&#39;</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment"># Turn markers recognition on</span>
client<span class="token punctuation">.</span>update_configuration<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;enabled&#39;</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="wait-global-position" tabindex="-1"><a class="header-anchor" href="#wait-global-position" aria-hidden="true">#</a> #</h3><p>Wait for global position to appear (finishing <a href="/clover-vuepress/en/gps.html" class="">GPS receiver</a> initialization):</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> math

<span class="token keyword">while</span> <span class="token keyword">not</span> rospy<span class="token punctuation">.</span>is_shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> math<span class="token punctuation">.</span>isfinite<span class="token punctuation">(</span>get_telemetry<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lat<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    rospy<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="get-param" tabindex="-1"><a class="header-anchor" href="#get-param" aria-hidden="true">#</a> #</h3><p>Read flight controller&#39;s parameter:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> ParamGet
<span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> ParamValue

param_get <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">&#39;mavros/param/get&#39;</span><span class="token punctuation">,</span> ParamGet<span class="token punctuation">)</span>

<span class="token comment"># Read parameter of type INT</span>
value <span class="token operator">=</span> param_get<span class="token punctuation">(</span>param_id<span class="token operator">=</span><span class="token string">&#39;COM_FLTMODE1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>integer

<span class="token comment"># Read parameter of type FLOAT</span>
value <span class="token operator">=</span> param_get<span class="token punctuation">(</span>param_id<span class="token operator">=</span><span class="token string">&#39;MPC_Z_P&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token builtin">float</span>
</code></pre></div><h3 id="set-param" tabindex="-1"><a class="header-anchor" href="#set-param" aria-hidden="true">#</a> #</h3><p>Set flight controller&#39;s parameter:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>srv <span class="token keyword">import</span> ParamSet
<span class="token keyword">from</span> mavros_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> ParamValue

param_set <span class="token operator">=</span> rospy<span class="token punctuation">.</span>ServiceProxy<span class="token punctuation">(</span><span class="token string">&#39;mavros/param/set&#39;</span><span class="token punctuation">,</span> ParamSet<span class="token punctuation">)</span>

<span class="token comment"># Set parameter of type INT:</span>
param_set<span class="token punctuation">(</span>param_id<span class="token operator">=</span><span class="token string">&#39;COM_FLTMODE1&#39;</span><span class="token punctuation">,</span> value<span class="token operator">=</span>ParamValue<span class="token punctuation">(</span>integer<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Set parameter of type FLOAT:</span>
param_set<span class="token punctuation">(</span>param_id<span class="token operator">=</span><span class="token string">&#39;MPC_Z_P&#39;</span><span class="token punctuation">,</span> value<span class="token operator">=</span>ParamValue<span class="token punctuation">(</span>real<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/CopterExpress/clover/edit/master/docs/en/snippets.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/clover-vuepress/en/frames.html" class="" aria-label="Coordinate systems (frames)"><!--[--><!--]--> Coordinate systems (frames) <!--[--><!--]--></a></span><span class="next"><a href="/clover-vuepress/en/laser.html" class="" aria-label="Working with a laser rangefinder"><!--[--><!--]--> Working with a laser rangefinder <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/clover-vuepress/assets/app.4f6a4bec.js" defer></script>
  </body>
</html>
